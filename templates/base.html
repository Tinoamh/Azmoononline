<!DOCTYPE html>
<html lang="fa">
<head>
  {% load static %}
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}سامانه آزمون آنلاین{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'styles.css' %}" />
  <style>
    .hamburger{position:fixed;top:22px;right:22px;width:40px;height:32px;display:flex;flex-direction:column;justify-content:center;gap:6px;cursor:pointer;z-index:1100}
    .hamburger .bar{height:3px;background:#3A6CF4;border-radius:3px}
    .drawer-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.25);display:none;z-index:1090}
    .drawer-backdrop.open{display:block}
    .admin-drawer{position:fixed;top:0;right:0;height:100vh;width:280px;background:#3A6CF4;color:#fff;box-shadow:-12px 0 28px rgba(0,0,0,0.18);transform:translateX(100%);transition:transform .25s ease;z-index:1110;direction:rtl;display:flex;flex-direction:column}
    .admin-drawer.open{transform:translateX(0)}
    .admin-drawer-header{padding:16px 18px;border-bottom:1px solid rgba(255,255,255,0.25);font-weight:800;text-align:right}
    .admin-drawer-header a{color:#fff;text-decoration:none;display:block}
    .admin-drawer-list{list-style:none;margin:8px 0 0 0;padding:0}
    .admin-drawer-list li{margin:0;border-top:1px solid rgba(255,255,255,0.2)}
    .admin-drawer-list a{display:flex;align-items:center;justify-content:flex-start;gap:12px;padding:12px 18px;color:#fff;text-decoration:none}
    .site-footer.student-footer{background:#e2fdff}
  </style>
  {% block extra_css %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
  {% block header %}
  <header>
    <nav>
      {% if not user.is_authenticated %}
        <a href="/accounts/login/">ورود</a>
        <a href="/accounts/register/">ثبت‌نام</a>
      {% endif %}
    </nav>
    {% if user.is_authenticated %}
      <div id="globalHamburger" class="hamburger" aria-label="menu">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>
      <div id="globalDrawerBackdrop" class="drawer-backdrop"></div>
      <nav id="globalDrawer" class="admin-drawer" aria-label="menu">
        <div class="admin-drawer-header"><a href="/accounts/profile/">{{ user.get_full_name|default:user.email }}</a></div>
        <ul class="admin-drawer-list">
          <li><a href="/"><span>خانه</span></a></li>
          {% if user.role and user.role.code == 'admin' %}
            <li><a href="/accounts/users/"><span>لیست کاربران</span></a></li>
            <li><a href="/accounts/dashboard/"><span>لیست کلاس‌ها</span></a></li>
          {% elif user.role and user.role.code == 'student' %}
            <li><a href="/accounts/dashboard/"><span>لیست آزمون‌ها</span></a></li>
            <li><a href="/accounts/exam-profile/"><span>لیست نمرات</span></a></li>
          {% elif user.role and user.role.code == 'instructor' %}
            <li><a href="/accounts/question-bank/"><span>بانک سوالات</span></a></li>
            <li><a href="/accounts/students/"><span>لیست دانشجویان</span></a></li>
            <li><a href="/accounts/exam-profile/"><span>نتایج آزمون</span></a></li>
            <li><a href="/accounts/exam-define/"><span>تعریف آزمون</span></a></li>
            <li><a href="/accounts/exams/"><span>لیست آزمون‌های فعال</span></a></li>
          {% endif %}
          <li><a href="/accounts/logout/"><span>خروج</span></a></li>
        </ul>
      </nav>
      <script>
        (function(){
          var b=document.getElementById('globalHamburger');
          var d=document.getElementById('globalDrawer');
          var k=document.getElementById('globalDrawerBackdrop');
          if(b&&d&&k){
            var t=function(){ d.classList.toggle('open'); k.classList.toggle('open'); };
            b.addEventListener('click', t);
            k.addEventListener('click', t);
            document.addEventListener('keydown', function(e){ if(e.key==='Escape'&&d.classList.contains('open')) t(); });
          }
        })();
      </script>
    {% endif %}
  </header>
  {% endblock %}
  <main>
    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
    {% block content %}{% endblock %}
  </main>
  {% block footer %}
  <footer class="site-footer {% if user.is_authenticated and user.role and user.role.code == 'student' %}student-footer{% endif %}">
    <div class="footer-wrap">
      <div class="footer-top">
        <div class="brand-col">
          <div class="brand-title">samsamian</div>
          <p class="brand-desc">سامانه آنلاین آزمون‌یار — ما را در شبکه‌های اجتماعی دنبال کنید</p>
        </div>
        <div class="footer-col">
          <h4>تماس</h4>
          <ul>
            <li><a href="#">Content</a></li>
            <li><a href="#">How it Works</a></li>
            <li><a href="#">Create</a></li>
            <li><a href="#">Explore</a></li>
            <li><a href="#">Terms & Services</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>ارتباط</h4>
          <ul>
            <li><a href="#">Help Center</a></li>
            <li><a href="#">Partners</a></li>
            <li><a href="#">Suggestions</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Newsletters</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>خدمات</h4>
          <ul>
            <li><a href="#">Our Partner</a></li>
            <li><a href="#">Become a Partner</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-divider"></div>
      <div class="footer-bottom">
        <div class="copyright">Copyright © 202X . All Rights Reserved.</div>
        <div class="social">
          <a href="#" aria-label="Instagram" class="ico" title="Instagram">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
              <path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm10 2H7a3 3 0 00-3 3v10a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3zm-5 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm5.5-2a1.5 1.5 0 110 3 1.5 1.5 0 010-3z"/>
            </svg>
          </a>
          <a href="#" aria-label="Facebook" class="ico" title="Facebook">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
              <path d="M22 12a10 10 0 10-11.6 9.9v-7h-2.1V12h2.1V9.8c0-2 1.2-3.1 3-3.1.9 0 1.8.1 2.7.2v2.3h-1.5c-1.2 0-1.6.8-1.6 1.5V12h2.7l-.4 2.9h-2.3v7A10 10 0 0022 12z"/>
            </svg>
          </a>
          <a href="#" aria-label="Twitter" class="ico" title="Twitter">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
              <path d="M22 5.9c-.8.4-1.7.6-2.6.8a4.1 4.1 0 00-7 3.7A11.6 11.6 0 013 5.3a4.1 4.1 0 001.3 5.5c-.6 0-1.2-.2-1.7-.4v.1c0 2 1.4 3.8 3.3 4.2-.4.1-.8.2-1.3.2-.3 0-.6 0-.9-.1a4.2 4.2 0 003.9 2.9A8.3 8.3 0 013 19.6a11.7 11.7 0 006.3 1.9c7.6 0 11.7-6.3 11.7-11.7v-.5c.8-.6 1.5-1.3 2-2.1-.7.3-1.5.6-2.3.7z"/>
            </svg>
          </a>
          <a href="#" aria-label="LinkedIn" class="ico" title="LinkedIn">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" aria-hidden="true">
              <path d="M4.98 3.5a2.5 2.5 0 110 5 2.5 2.5 0 010-5zM3 8.9h4v12H3v-12zm7.5 0h3.8v1.7h.1c.5-.9 1.7-1.8 3.4-1.8 3.6 0 4.3 2.3 4.3 5.3v6.8h-4v-6.1c0-1.5 0-3.5-2.1-3.5-2.1 0-2.4 1.6-2.4 3.4v6.2h-4v-12z"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </footer>
  {% endblock %}
</body>
</html>
