{% extends "base.html" %}
{% block title %}Ù„ÛŒØ³Øª Ù†Ù…Ø±Ø§Øª{% endblock %}
{% block body_class %}student-scores{% endblock %}
{% block extra_css %}
<style>
  body.student-scores { background: linear-gradient(180deg, #f5f8ff 0%, #eef3ff 100%); }
  
  .wrap{max-width:900px;margin:24px auto;padding:0 16px}
  
  /* Student View Specifics */
  .card { 
      background-color: #e2fdff; 
      border: none; 
      position: relative; 
      z-index: 1; 
      border-radius:16px; 
      box-shadow:0 16px 28px rgba(58,108,244,0.12); 
      padding:16px; 
  }
  
  .grad-line-container {
      text-align: center;
      font-size: 1.25rem;
      margin: 5px 0;
      opacity: 0.9;
      user-select: none;
      white-space: nowrap;
      overflow: hidden;
      display: flex;
      justify-content: space-between;
      padding: 0 40px;
      gap: 8px;
  }
  .grad-item {
      display: inline-block;
      animation: float-cap 4s ease-in-out infinite;
  }
  .grad-item:nth-child(even) {
      animation-name: float-cap-opposite;
  }
  @keyframes float-cap { 0%,100%{transform:translateY(0);}50%{transform:translateY(-4px);} }
  @keyframes float-cap-opposite { 0%,100%{transform:translateY(0);}50%{transform:translateY(4px);} }

  /* Background Effects */
  .stars, .confetti { position:fixed; width:100%; height:100%; top:0; left:0; overflow:hidden; z-index:0; pointer-events:none; }
  .star, .conf { position:absolute; border-radius:50%; }
  .star { width:6px; height:6px; background:#ffd700; animation: twinkle 4s infinite alternate; }
  @keyframes twinkle {0%{opacity:0.3;transform:scale(1);}50%{opacity:1;transform:scale(1.3);}100%{opacity:0.3;transform:scale(1);} }
  .conf { width:8px; height:8px; background: #ff4da6; animation: fall 6s linear infinite; }
  @keyframes fall { 0%{transform:translateY(-10px) rotate(0deg);}100%{transform:translateY(100vh) rotate(360deg);} }

  /* Button Styles */
  .btn-report {
      background-color: #bfd7ff !important;
      color: #3f59cf !important;
      border: none !important;
      box-shadow: 0 4px 10px rgba(58,108,244,0.1);
      transition: transform 0.2s;
      text-decoration: none;
      font-size: 13px;
      padding: 6px 12px;
      border-radius: 10px;
      font-weight: 700;
      display: inline-block;
      margin-top: 4px;
  }
  .btn-report:hover {
      background-color: #a6c5ff !important;
      transform: translateY(-2px);
  }
  
  .item { 
      border:1px solid #eaf1ff; 
      border-radius:12px; 
      padding:12px; 
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
      background: rgba(255,255,255,0.6); 
  }
</style>
{% endblock %}
{% block content %}
    <div class="stars" id="stars"></div>
    <div class="confetti" id="confetti"></div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Stars
        const starsContainer = document.getElementById('stars');
        if(starsContainer) {
            for(let i=0;i<30;i++){
                const star = document.createElement('div');
                star.classList.add('star');
                star.style.top = Math.random()*100 + '%';
                star.style.left = Math.random()*100 + '%';
                star.style.width = Math.random()*4 + 4 + 'px';
                star.style.height = star.style.width;
                star.style.animationDuration = (Math.random()*5+4)+'s';
                starsContainer.appendChild(star);
            }
        }

        // Confetti
        const confettiContainer = document.getElementById('confetti');
        if(confettiContainer) {
            for(let i=0;i<20;i++){
                const c = document.createElement('div');
                c.classList.add('conf');
                c.style.left = Math.random()*100 + '%';
                c.style.width = Math.random()*6+4 + 'px';
                c.style.height = c.style.width;
                c.style.background = ['#ff4da6','#ffde59','#4da6ff','#00ff99'][Math.floor(Math.random()*4)];
                c.style.animationDuration = (Math.random()*5+6)+'s';
                confettiContainer.appendChild(c);
            }
        }
    });
    </script>

<div class="wrap">
  <div class="card">
    <h2 style="font-weight:800;color:#3A6CF4;margin-bottom:16px">Ù„ÛŒØ³Øª Ù†Ù…Ø±Ø§Øª Ùˆ Ø³ÙˆØ§Ø¨Ù‚ Ø¢Ø²Ù…ÙˆÙ†</h2>
    <div style="display:grid;grid-template-columns:1fr;gap:12px">
      {% for a in assignments %}
      <div class="item">
        <div>
            <div style="font-weight:bold;">{{ a.exam.name }}</div>
            <div style="color:#6b7aa6;font-size:12px;">ØªØ§Ø±ÛŒØ® Ø´Ø±Ú©Øª: {{ a.completed_at|date:"Y/m/d H:i" }}</div>
        </div>
        <div style="text-align:left;">
            <div style="font-weight:bold;color:#3A6CF4;">Ù†Ù…Ø±Ù‡: {{ a.score|floatformat:1 }}%</div>
            <a href="{% url 'exam_result' a.exam.id %}" class="btn-report">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ù†Ø§Ù…Ù‡</a>
        </div>
      </div>
      {% if not forloop.last %}
      <div class="grad-line-container">
        {% for i in "12345" %}
        <span class="grad-item" style="animation-delay: -{{ forloop.counter }}s;">ðŸŽ“</span>
        {% endfor %}
      </div>
      {% endif %}
      {% empty %}
      <div style="padding:20px;text-align:center;color:#6b7aa6;">Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ø¯Ø± Ù‡ÛŒÚ† Ø¢Ø²Ù…ÙˆÙ†ÛŒ Ø´Ø±Ú©Øª Ù†Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒØ¯.</div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}